<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Quiz</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .question-container { margin: 20px 0; }
        .result { margin-top: 20px; }
        #admin-panel, #login-panel, #quiz-panel { display: none; }
    </style>
</head>
<body>

    <h1>MCQ Quiz</h1>

    <div id="login-panel">
        <h2>Login</h2>
        <label for="username">Username:</label>
        <input type="text" id="username"><br>
        <label for="password">Password:</label>
        <input type="password" id="password"><br>
        <button id="login-button">Login</button>
        <p id="login-message"></p>
    </div>

    <div id="admin-panel">
        <h2>Admin Panel</h2>
        <label for="question">Question:</label>
        <input type="text" id="question"><br>
        <label for="options">Options (comma separated):</label>
        <input type="text" id="options"><br>
        <label for="answer">Correct Answer (A/B/C/D):</label>
        <input type="text" id="answer"><br>
        <button id="add-question-button">Add Question</button>
        <button id="delete-question-button">Delete Question</button>
        <select id="question-select"></select>
        <p id="admin-message"></p>
    </div>

    <div id="quiz-panel">
        <div id="quiz-container"></div>
        <button id="submit-button" style="display:none;">Submit</button>
        <div id="result-container" class="result"></div>
    </div>

    <script>
        let currentUser = null;
        let questions = [];

        // Load questions from local storage
        function loadQuestions() {
            const savedQuestions = localStorage.getItem('questions');
            if (savedQuestions) {
                questions = JSON.parse(savedQuestions);
            } else {
                questions = [
                    // Sample questions (easy)
                    { question: "What is 2 + 3?", options: ["4", "5", "6", "7"], answer: "B" },
                    { question: "What is 7 - 2?", options: ["3", "4", "5", "6"], answer: "C" },
                    { question: "If you have 5 apples and give 3 away, how many do you have left?", options: ["1", "2", "3", "4"], answer: "B" },
                    { question: "What is 3 x 4?", options: ["10", "11", "12", "13"], answer: "C" },
                    // Add more questions as needed
                ];
                saveQuestions(); // Save default questions
            }
            updateQuestionSelect();
        }

        function saveQuestions() {
            localStorage.setItem('questions', JSON.stringify(questions));
        }

        function showLogin() {
            document.getElementById('login-panel').style.display = 'block';
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === 'admin' && password === 'adminpass') {
                currentUser = 'admin';
                document.getElementById('login-panel').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
            } else if (username === 'student' && password === 'studentpass') {
                currentUser = 'student';
                document.getElementById('login-panel').style.display = 'none';
                document.getElementById('quiz-panel').style.display = 'block';
                displayQuiz();
            } else {
                document.getElementById('login-message').textContent = 'Invalid credentials';
            }
        }

        function updateQuestionSelect() {
            const select = document.getElementById('question-select');
            select.innerHTML = '';
            questions.forEach((q, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = q.question;
                select.appendChild(option);
            });
        }

        function addQuestion() {
            const questionText = document.getElementById('question').value;
            const optionsText = document.getElementById('options').value.split(',');
            const answer = document.getElementById('answer').value.toUpperCase();

            questions.push({ question: questionText, options: optionsText, answer: answer });
            saveQuestions();
            document.getElementById('admin-message').textContent = 'Question added!';
            updateQuestionSelect();
        }

        function deleteQuestion() {
            const select = document.getElementById('question-select');
            const index = select.value;

            if (index !== '') {
                questions.splice(index, 1);
                saveQuestions();
                document.getElementById('admin-message').textContent = 'Question deleted!';
                updateQuestionSelect();
            }
        }

        function displayQuiz() {
            const container = questions.map((q, index) => `
                <div class="question-container">
                    <strong>Question ${index + 1}:</strong> ${q.question}<br>
                    ${q.options.map((option, i) => `
                        <label>
                            <input type="radio" name="question-${index}" value="${String.fromCharCode(65 + i)}">
                            ${String.fromCharCode(65 + i)}. ${option}
                        </label><br>
                    `).join('')}
                </div>
            `).join('');

            document.getElementById('quiz-container').innerHTML = container;
            document.getElementById('submit-button').style.display = 'block';
        }

        function checkAnswers() {
            let score = 0;
            const inputs = document.querySelectorAll('input[type="radio"]:checked');
            inputs.forEach(input => {
                const index = input.name.split('-')[1];
                const userAnswer = input.value;
                if (questions[index].answer === userAnswer) {
                    score++;
                }
            });

            document.getElementById('quiz-container').innerHTML = '';
            document.getElementById('submit-button').style.display = 'none';
            document.getElementById('result-container').innerHTML = `
                <br>Your score: ${score}/${questions.length}<br>
                <br>Answers:<br>
                ${questions.map((q, i) => `Question ${i + 1}: ${q.answer}<br>`).join('')}
            `;
        }

        document.getElementById('login-button').addEventListener('click', login);
        document.getElementById('add-question-button').addEventListener('click', addQuestion);
        document.getElementById('delete-question-button').addEventListener('click', deleteQuestion);
        document.getElementById('submit-button').addEventListener('click', checkAnswers);

        loadQuestions(); // Load questions on page load
        showLogin();
    </script>

</body>
</html>
